{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'./MyAppointment.css';import{Context}from'../../context/Context';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyAppointment=()=>{const{token,getAlldoctors}=useContext(Context);const[appointments,setAppointments]=useState([]);const getAppointments=async()=>{try{const response=await axios.get('http://localhost:4000/api/user/appointments',{headers:{token}});if(response.data.success){setAppointments(response.data.data.reverse());console.log(response.data.data);}else{toast.error(response.data.message);}}catch(error){toast.error(error.message);}};const cancelAppointment=async appointmentId=>{try{const response=await axios.post('http://localhost:4000/api/user/cancel-appointment',{appointmentId},{headers:{token}});if(response.data.success){toast.success(response.data.message);getAppointments();getAlldoctors();}else{toast.error(response.data.message);}}catch(error){toast.error(error.message);}};useEffect(()=>{getAppointments();},[token]);return/*#__PURE__*/_jsxs(\"div\",{className:\"my-appointment my-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:\"My appointments\"}),appointments.map((appointment,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"appointment d-flex justify-content-between py-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doc-infos d-flex gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img\",children:/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:4000/images/${appointment.docData.image}`,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"name\",children:appointment.docData.name}),/*#__PURE__*/_jsx(\"p\",{className:\"info mb-3\",children:appointment.docData.speciality}),/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"info\",children:appointment.docData.adress.address1}),/*#__PURE__*/_jsx(\"p\",{className:\"info mb-3\",children:appointment.docData.adress.address2}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label\",children:\"Date & Time:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"info\",children:[appointment.slotDate,\" | \",appointment.slotTime]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns d-flex flex-column gap-2\",children:[!appointment.cancelled&&/*#__PURE__*/_jsx(\"button\",{className:\"pay\",children:\"Pay Online\"}),!appointment.cancelled?/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelAppointment(appointment._id),className:\"cancel\",children:\"Cancel appointment\"}):/*#__PURE__*/_jsx(\"button\",{className:\"cancelled\",children:\"Appointment cancelled\"})]})]},index);})]});};export default MyAppointment;","map":{"version":3,"names":["React","useContext","useEffect","useState","Context","axios","toast","jsx","_jsx","jsxs","_jsxs","MyAppointment","token","getAlldoctors","appointments","setAppointments","getAppointments","response","get","headers","data","success","reverse","console","log","error","message","cancelAppointment","appointmentId","post","className","children","map","appointment","index","src","docData","image","alt","name","speciality","adress","address1","address2","slotDate","slotTime","cancelled","onClick","_id"],"sources":["C:/doctor/frontend/src/pages/my-appointment/MyAppointment.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport './MyAppointment.css';\r\nimport {Context} from '../../context/Context';\r\nimport axios from 'axios';\r\nimport {toast} from 'react-toastify';\r\n\r\nconst MyAppointment = () => {\r\n  const {token, getAlldoctors} = useContext(Context);\r\n  const[appointments, setAppointments] = useState([]);\r\n  const getAppointments = async()=>{\r\n    try {\r\n      const response = await axios.get('http://localhost:4000/api/user/appointments', {headers:{token}});\r\n      if(response.data.success){\r\n        setAppointments(response.data.data.reverse());\r\n        console.log(response.data.data);\r\n      }\r\n      else{\r\n        toast.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  }\r\n  const cancelAppointment = async(appointmentId) =>{\r\n    try {\r\n      const response = await axios.post('http://localhost:4000/api/user/cancel-appointment', {appointmentId}, {headers:{token}});\r\n      if(response.data.success){\r\n        toast.success(response.data.message);\r\n        getAppointments();\r\n        getAlldoctors();\r\n      }\r\n      else{\r\n        toast.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    getAppointments();\r\n  }\r\n  ,[token])\r\n  return (\r\n    <div className='my-appointment my-5'>\r\n      <p className='mb-4'>My appointments</p>\r\n      {appointments.map((appointment, index)=>{\r\n        return(\r\n        <div key={index} className='appointment d-flex justify-content-between py-3'>\r\n          <div className='doc-infos d-flex gap-4'>\r\n            <div className='img'>\r\n              <img src={`http://localhost:4000/images/${appointment.docData.image}`} alt=''/>\r\n            </div>\r\n            <div className='text'>\r\n              <p className='name'>{appointment.docData.name}</p>\r\n              <p className='info mb-3'>{appointment.docData.speciality}</p>\r\n              <p className='label'>Address</p>\r\n              <p className='info'>{appointment.docData.adress.address1}</p>\r\n              <p className='info mb-3'>{appointment.docData.adress.address2}</p>\r\n              <div className='d-flex gap-1'>\r\n                <p className='label'>Date & Time:</p>\r\n                <p className='info'>{appointment.slotDate} | {appointment.slotTime}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='btns d-flex flex-column gap-2'>\r\n            {!appointment.cancelled && <button className='pay'>Pay Online</button>}\r\n            {!appointment.cancelled ? \r\n            <button onClick={()=>cancelAppointment(appointment._id)} className='cancel'>Cancel appointment</button>:\r\n            <button className='cancelled'>Appointment cancelled</button>\r\n            }\r\n          </div>\r\n        </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyAppointment\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,qBAAqB,CAC5B,OAAQC,OAAO,KAAO,uBAAuB,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAAQC,KAAK,KAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,KAAK,CAAEC,aAAa,CAAC,CAAGZ,UAAU,CAACG,OAAO,CAAC,CAClD,KAAK,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACnD,KAAM,CAAAa,eAAe,CAAG,KAAAA,CAAA,GAAS,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACa,GAAG,CAAC,6CAA6C,CAAE,CAACC,OAAO,CAAC,CAACP,KAAK,CAAC,CAAC,CAAC,CAClG,GAAGK,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAC,CACvBN,eAAe,CAACE,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAC7CC,OAAO,CAACC,GAAG,CAACP,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CACjC,CAAC,IACG,CACFd,KAAK,CAACmB,KAAK,CAACR,QAAQ,CAACG,IAAI,CAACM,OAAO,CAAC,CACpC,CACF,CAAE,MAAOD,KAAK,CAAE,CACdnB,KAAK,CAACmB,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC,CAC5B,CACF,CAAC,CACD,KAAM,CAAAC,iBAAiB,CAAG,KAAM,CAAAC,aAAa,EAAI,CAC/C,GAAI,CACF,KAAM,CAAAX,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACwB,IAAI,CAAC,mDAAmD,CAAE,CAACD,aAAa,CAAC,CAAE,CAACT,OAAO,CAAC,CAACP,KAAK,CAAC,CAAC,CAAC,CAC1H,GAAGK,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAC,CACvBf,KAAK,CAACe,OAAO,CAACJ,QAAQ,CAACG,IAAI,CAACM,OAAO,CAAC,CACpCV,eAAe,CAAC,CAAC,CACjBH,aAAa,CAAC,CAAC,CACjB,CAAC,IACG,CACFP,KAAK,CAACmB,KAAK,CAACR,QAAQ,CAACG,IAAI,CAACM,OAAO,CAAC,CACpC,CACF,CAAE,MAAOD,KAAK,CAAE,CACdnB,KAAK,CAACmB,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC,CAC5B,CACF,CAAC,CACDxB,SAAS,CAAC,IAAI,CACZc,eAAe,CAAC,CAAC,CACnB,CAAC,CACA,CAACJ,KAAK,CAAC,CAAC,CACT,mBACEF,KAAA,QAAKoB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCvB,IAAA,MAAGsB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,iBAAe,CAAG,CAAC,CACtCjB,YAAY,CAACkB,GAAG,CAAC,CAACC,WAAW,CAAEC,KAAK,GAAG,CACtC,mBACAxB,KAAA,QAAiBoB,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC1ErB,KAAA,QAAKoB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCvB,IAAA,QAAKsB,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClBvB,IAAA,QAAK2B,GAAG,CAAE,gCAAgCF,WAAW,CAACG,OAAO,CAACC,KAAK,EAAG,CAACC,GAAG,CAAC,EAAE,CAAC,CAAC,CAC5E,CAAC,cACN5B,KAAA,QAAKoB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvB,IAAA,MAAGsB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEE,WAAW,CAACG,OAAO,CAACG,IAAI,CAAI,CAAC,cAClD/B,IAAA,MAAGsB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEE,WAAW,CAACG,OAAO,CAACI,UAAU,CAAI,CAAC,cAC7DhC,IAAA,MAAGsB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,SAAO,CAAG,CAAC,cAChCvB,IAAA,MAAGsB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEE,WAAW,CAACG,OAAO,CAACK,MAAM,CAACC,QAAQ,CAAI,CAAC,cAC7DlC,IAAA,MAAGsB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEE,WAAW,CAACG,OAAO,CAACK,MAAM,CAACE,QAAQ,CAAI,CAAC,cAClEjC,KAAA,QAAKoB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BvB,IAAA,MAAGsB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,cAAY,CAAG,CAAC,cACrCrB,KAAA,MAAGoB,SAAS,CAAC,MAAM,CAAAC,QAAA,EAAEE,WAAW,CAACW,QAAQ,CAAC,KAAG,CAACX,WAAW,CAACY,QAAQ,EAAI,CAAC,EACpE,CAAC,EACH,CAAC,EACH,CAAC,cACNnC,KAAA,QAAKoB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,EAC3C,CAACE,WAAW,CAACa,SAAS,eAAItC,IAAA,WAAQsB,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,YAAU,CAAQ,CAAC,CACrE,CAACE,WAAW,CAACa,SAAS,cACvBtC,IAAA,WAAQuC,OAAO,CAAEA,CAAA,GAAIpB,iBAAiB,CAACM,WAAW,CAACe,GAAG,CAAE,CAAClB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cACvGvB,IAAA,WAAQsB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,uBAAqB,CAAQ,CAAC,EAEzD,CAAC,GAvBEG,KAwBL,CAAC,CAER,CAAC,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}